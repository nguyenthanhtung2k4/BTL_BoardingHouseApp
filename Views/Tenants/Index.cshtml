@model IEnumerable<BoardingHouseApp.Models.Tenant>
@{
    ViewData["Title"] = "Danh s√°ch ng∆∞·ªùi thu√™";
    var isAdmin = User.IsInRole("Admin");
    var isTenant = User.IsInRole("Tenant");
}
<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Ng∆∞·ªùi thu√™</h2>
        
        @if (isAdmin)
        {
            <a asp-action="Create" class="btn btn-primary"><i class="bi bi-plus-lg"></i> Th√™m ng∆∞·ªùi thu√™</a>
        }
    </div>

    @if (isTenant)
    {
        <div class="alert alert-info">
            <i class="bi bi-info-circle"></i> B·∫°n ƒëang xem th√¥ng tin c√° nh√¢n c·ªßa m√¨nh.
        </div>
    }

    <table class="table table-striped align-middle">
        <thead>
            <tr>
                <th>M√£</th>
                <th>H·ªç t√™n</th>
                <th>ƒêi·ªán tho·∫°i</th>
                <th>Email</th>
                <th>Ng√†y t·∫°o</th>
                <th>Ng√†y c·∫≠p nh·∫≠t</th>
                @if (isAdmin || isTenant)
                {
                    <th class="text-end">Thao t√°c</th>
                }
            </tr>
        </thead>
        <tbody>
        @foreach (var t in Model)
        {
            <tr>
                <td>@t.TenantId</td>
                <td>@t.FullName</td>
                <td>@t.Phone</td>
                <td>@t.Email</td>
                <td>@t.CreatedAt.ToString("dd/MM/yyyy HH:mm")</td>
                <td>@t.UpdatedAt.ToString("dd/MM/yyyy HH:mm")</td>
                @if (isAdmin)
                {
                    <td class="text-end">
                        <a asp-action="Edit" asp-route-id="@t.TenantId" class="btn btn-sm btn-outline-secondary">S·ª≠a</a>
                        <a asp-action="Delete" asp-route-id="@t.TenantId" class="btn btn-sm btn-outline-danger ms-1">X√≥a</a>
                    </td>
                }
                else if (isTenant)
                {
                    <td class="text-end">
                        <a asp-action="Edit" asp-route-id="@t.TenantId" class="btn btn-sm btn-outline-secondary">Ch·ªânh s·ª≠a</a>
                    </td>
                }
            </tr>
        }
        </tbody>
    </table>

    @if (isTenant && Model.Count() == 1)
    {
        <div class="mt-4">
            <div class="card">
                <div class="card-header bg-light">
                    <h5 class="mb-0">üìã Th√¥ng tin c√° nh√¢n</h5>
                </div>
                <div class="card-body">
                    @foreach (var t in Model)
                    {
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>H·ªç t√™n:</strong> @t.FullName</p>
                                <p><strong>Email:</strong> @t.Email</p>
                            </div>
                            <div class="col-md-6">
                                <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> @t.Phone</p>
                                <p><strong>Ng√†y tham gia:</strong> @t.CreatedAt.ToString("dd/MM/yyyy")</p>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    }
</div>